"use strict";(()=>{var e={};e.id=8285,e.ids=[8285],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},59593:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>h,patchFetch:()=>v,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>m});var s={};t.r(s),t.d(s,{GET:()=>g,POST:()=>p});var n=t(49303),a=t(88716),o=t(60670),u=t(87070),i=t(13538),l=t(79714);async function p(e){try{let{name:r}=await e.json();if(!r||"string"!=typeof r)return u.NextResponse.json({error:"Restaurant name is required"},{status:400});let t=(0,l.GD)(r);if(!t||!(0,l.L$)(t))return u.NextResponse.json({error:"Cannot generate valid slug from this name"},{status:400});let s=(await i._.restaurant.findMany({select:{slug:!0}})).map(e=>e.slug),n=(0,l.Ov)(t,s),a=[n];if(n!==t)for(let e of[`${t}-restaurant`,`${t}-cafe`,`${t}-bistro`,`${t}-kitchen`]){let r=(0,l.Ov)(e,s);!a.includes(r)&&a.length<5&&a.push(r)}return u.NextResponse.json({suggestions:a,primary:n})}catch(e){return console.error("Slug suggestion error:",e),u.NextResponse.json({error:"Internal server error"},{status:500})}}async function g(e){let{searchParams:r}=new URL(e.url),t=r.get("name");if(!t)return u.NextResponse.json({error:"Name parameter is required"},{status:400});try{let e=(0,l.GD)(t);if(!e||!(0,l.L$)(e))return u.NextResponse.json({error:"Cannot generate valid slug from this name"},{status:400});let r=(await i._.restaurant.findMany({select:{slug:!0}})).map(e=>e.slug),s=(0,l.Ov)(e,r),n=[s];for(let t of[`${e}-restaurant`,`${e}-cafe`,`${e}-bistro`,`${e}-kitchen`,`${e}-place`]){let e=(0,l.Ov)(t,r);!n.includes(e)&&n.length<5&&n.push(e)}return u.NextResponse.json({suggestions:n,primary:s})}catch(e){return console.error("Slug suggestion error:",e),u.NextResponse.json({error:"Internal server error"},{status:500})}}let c=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/slug/suggest/route",pathname:"/api/slug/suggest",filename:"route",bundlePath:"app/api/slug/suggest/route"},resolvedPagePath:"C:\\dev\\SiparisQR\\src\\app\\api\\slug\\suggest\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:f}=c,h="/api/slug/suggest/route";function v(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:m})}},13538:(e,r,t)=>{t.d(r,{_:()=>n});var s=t(53524);let n=globalThis.prisma??new s.PrismaClient({log:["query"]})},79714:(e,r,t)=>{function s(e){return e.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim().replace(/^-+|-+$/g,"")}function n(e){return/^[a-z0-9]+(?:-[a-z0-9]+)*$/.test(e)&&e.length>=3&&e.length<=50}function a(e){return!["www","api","admin","portal","yonetim","app","mail","ftp","blog","help","support","contact","about","pricing","terms","privacy","login","register","dashboard","kitchen","menu"].includes(e.toLowerCase())}function o(e,r){let t=e,s=1;for(;r.includes(t)||!a(t);)t=`${e}-${s}`,s++;return t}t.d(r,{GD:()=>s,L$:()=>n,Ov:()=>o,zC:()=>a})}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[9276,5972],()=>t(59593));module.exports=s})();