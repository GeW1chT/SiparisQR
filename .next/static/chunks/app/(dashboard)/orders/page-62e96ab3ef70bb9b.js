(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[709],{8980:function(e,t,s){Promise.resolve().then(s.bind(s,258))},5302:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5317:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5252:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},2208:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},740:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},2431:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},5131:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},258:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var r=s(7437),a=s(2265),n=s(605),l=s(9376),i=s(9820),c=s(2381),d=s(9174),o=s(1723),u=s(5317),x=s(5302),m=s(5131),h=s(2431),f=s(5252),p=s(740),y=s(5805),j=s(2208);let g={PENDING:{label:"Bekliyor",color:"bg-yellow-100 text-yellow-800",icon:o.Z},PREPARING:{label:"Hazırlanıyor",color:"bg-blue-100 text-blue-800",icon:u.Z},READY:{label:"Hazır",color:"bg-green-100 text-green-800",icon:x.Z},COMPLETED:{label:"Tamamlandı",color:"bg-gray-100 text-gray-800",icon:x.Z},CANCELLED:{label:"İptal",color:"bg-red-100 text-red-800",icon:m.Z}};function b(){var e;let{data:t,status:s}=(0,n.useSession)(),m=(0,l.useRouter)(),[b,v]=(0,a.useState)([]),[N,w]=(0,a.useState)([]),[k,E]=(0,a.useState)("all"),[Z,C]=(0,a.useState)(!0),[z,D]=(0,a.useState)(null);(0,a.useEffect)(()=>{if("loading"!==s){if(!t){m.push("/portal/login");return}if("ADMIN"!==t.user.role){m.push("/");return}R()}},[t,s,m]),(0,a.useEffect)(()=>{"all"===k?w(b):w(b.filter(e=>e.status===k))},[b,k]);let R=async()=>{try{let e=await fetch("/api/orders");if(e.ok){let t=await e.json();v(t)}}catch(e){console.error("Error fetching orders:",e)}finally{C(!1)}},A=async(e,t)=>{try{(await fetch("/api/orders/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})})).ok&&R()}catch(e){console.error("Error updating order status:",e)}},P=e=>{let t=[];switch(e.status){case"PENDING":t.push((0,r.jsx)(c.z,{size:"sm",onClick:()=>A(e.id,"PREPARING"),className:"bg-blue-600 hover:bg-blue-700",children:"Onayla"},"accept")),t.push((0,r.jsx)(c.z,{size:"sm",variant:"outline",onClick:()=>A(e.id,"CANCELLED"),className:"text-red-600 hover:text-red-700",children:"İptal Et"},"cancel"));break;case"PREPARING":t.push((0,r.jsx)(c.z,{size:"sm",onClick:()=>A(e.id,"READY"),className:"bg-green-600 hover:bg-green-700",children:"Hazır"},"ready"));break;case"READY":t.push((0,r.jsx)(c.z,{size:"sm",onClick:()=>A(e.id,"COMPLETED"),className:"bg-gray-600 hover:bg-gray-700",children:"Teslim Et"},"complete"))}return t},M=e=>new Date(e).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}),S=e=>new Date(e).toLocaleDateString("tr-TR");return Z?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-orange-500"})}):(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Sipariş Takibi"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Gelen siparişleri y\xf6netin ve takip edin"})]}),(0,r.jsxs)(c.z,{onClick:R,variant:"outline",className:"flex items-center space-x-2",children:[(0,r.jsx)(h.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Yenile"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Bekleyen"}),(0,r.jsx)(o.Z,{className:"h-4 w-4 text-yellow-600"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:b.filter(e=>"PENDING"===e.status).length})})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Hazırlanıyor"}),(0,r.jsx)(u.Z,{className:"h-4 w-4 text-blue-600"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:b.filter(e=>"PREPARING"===e.status).length})})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Hazır"}),(0,r.jsx)(x.Z,{className:"h-4 w-4 text-green-600"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:b.filter(e=>"READY"===e.status).length})})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"G\xfcnl\xfck Gelir"}),(0,r.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("div",{className:"text-2xl font-bold",children:["₺",b.filter(e=>"COMPLETED"===e.status&&new Date(e.createdAt).toDateString()===new Date().toDateString()).reduce((e,t)=>e+t.total,0).toFixed(2)]})})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,r.jsx)(p.Z,{className:"h-4 w-4 text-gray-500"}),(0,r.jsxs)("select",{value:k,onChange:e=>E(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,r.jsxs)("option",{value:"all",children:["T\xfcm Siparişler (",b.length,")"]}),(0,r.jsxs)("option",{value:"PENDING",children:["Bekleyen (",b.filter(e=>"PENDING"===e.status).length,")"]}),(0,r.jsxs)("option",{value:"PREPARING",children:["Hazırlanıyor (",b.filter(e=>"PREPARING"===e.status).length,")"]}),(0,r.jsxs)("option",{value:"READY",children:["Hazır (",b.filter(e=>"READY"===e.status).length,")"]}),(0,r.jsxs)("option",{value:"COMPLETED",children:["Tamamlandı (",b.filter(e=>"COMPLETED"===e.status).length,")"]}),(0,r.jsxs)("option",{value:"CANCELLED",children:["İptal (",b.filter(e=>"CANCELLED"===e.status).length,")"]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[N.map(e=>{let t=g[e.status].icon;return(0,r.jsxs)(i.Zb,{className:"hover:shadow-md transition-shadow",children:[(0,r.jsx)(i.Ol,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,r.jsx)(y.Z,{className:"h-4 w-4"}),(0,r.jsxs)("span",{children:["Masa ",e.table.number]}),(0,r.jsxs)(d.C,{className:g[e.status].color,children:[(0,r.jsx)(t,{className:"h-3 w-3 mr-1"}),g[e.status].label]})]}),(0,r.jsxs)(i.SZ,{className:"mt-1",children:[S(e.createdAt)," - ",M(e.createdAt),e.customerName&&" • ".concat(e.customerName)]})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-lg font-semibold text-orange-600",children:["₺",e.total.toFixed(2)]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.items.length," \xfcr\xfcn"]})]}),(0,r.jsx)(c.z,{size:"sm",variant:"outline",onClick:()=>D(e),children:(0,r.jsx)(j.Z,{className:"h-4 w-4"})})]})]})}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:[(0,r.jsx)("strong",{children:"\xdcr\xfcnler:"})," ",e.items.map(e=>"".concat(e.product.name," (").concat(e.quantity,"x)")).join(", ")]}),e.notes&&(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,r.jsx)("strong",{children:"Not:"})," ",e.notes]})]}),(0,r.jsx)("div",{className:"flex space-x-2 ml-4",children:P(e)})]})})]},e.id)}),0===N.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(u.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Sipariş bulunamadı"}),(0,r.jsx)("p",{className:"text-gray-600",children:"all"===k?"Hen\xfcz sipariş bulunmuyor.":"".concat(null===(e=g[k])||void 0===e?void 0:e.label," durumunda sipariş bulunmuyor.")})]})]}),z&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)(i.Zb,{className:"w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,r.jsx)(i.Ol,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,r.jsx)(y.Z,{className:"h-5 w-5"}),(0,r.jsxs)("span",{children:["Masa ",z.table.number," - Sipariş Detayı"]})]}),(0,r.jsxs)(i.SZ,{children:[S(z.createdAt)," - ",M(z.createdAt)]})]}),(0,r.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>D(null),children:"✕"})]})}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)(d.C,{className:g[z.status].color,children:[(()=>{let e=g[z.status].icon;return(0,r.jsx)(e,{className:"h-3 w-3 mr-1"})})(),g[z.status].label]}),(0,r.jsxs)("div",{className:"text-xl font-semibold text-orange-600",children:["₺",z.items.reduce((e,t)=>e+t.price*t.quantity,0).toFixed(2)]})]}),z.customerName&&(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"M\xfcşteri:"})," ",z.customerName,z.customerPhone&&" - ".concat(z.customerPhone)]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Sipariş Detayları:"}),(0,r.jsx)("div",{className:"space-y-2",children:z.items.map(e=>(0,r.jsxs)("div",{className:"flex justify-between items-center py-2 border-b",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.product.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["₺",e.product.price.toFixed(2)," x ",e.quantity]})]}),(0,r.jsxs)("div",{className:"font-semibold",children:["₺",(e.price*e.quantity).toFixed(2)]})]},e.id))})]}),z.notes&&(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"\xd6zel Not:"}),(0,r.jsx)("p",{className:"mt-1 p-2 bg-gray-50 rounded",children:z.notes})]}),(0,r.jsx)("div",{className:"flex space-x-2 pt-4",children:P(z)})]})})]})})]})}},9174:function(e,t,s){"use strict";s.d(t,{C:function(){return i}});var r=s(7437);s(2265);var a=s(535),n=s(3448);let l=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:s}),t),...a})}},2381:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var r=s(7437),a=s(2265),n=s(7495),l=s(535),i=s(3448);let c=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:d=!1,...o}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(c({variant:a,size:l,className:s})),ref:t,...o})});d.displayName="Button"},9820:function(e,t,s){"use strict";s.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return o},ll:function(){return c}});var r=s(7437),a=s(2265),n=s(3448);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});l.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});i.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});o.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},3448:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(1994),a=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[697,605,971,117,744],function(){return e(e.s=8980)}),_N_E=e.O()}]);