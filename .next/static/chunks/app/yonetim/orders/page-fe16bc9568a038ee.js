(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[452],{8890:function(e,t,s){Promise.resolve().then(s.bind(s,7387))},5302:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5317:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2208:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2431:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},5131:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},7387:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var r=s(7437),n=s(605),a=s(9376),i=s(2265),l=s(9820),c=s(2381),d=s(9174),o=s(1723),u=s(5317),m=s(5302),x=s(5131),f=s(2431),h=s(2208);function p(){var e;let{data:t,status:s}=(0,n.useSession)();(0,a.useRouter)();let[p,g]=(0,i.useState)([]),[y,v]=(0,i.useState)(!0),[j,b]=(0,i.useState)(null),[N,k]=(0,i.useState)("all"),w={PENDING:{label:"Bekliyor",color:"bg-yellow-100 text-yellow-800",icon:o.Z},PREPARING:{label:"Hazırlanıyor",color:"bg-blue-100 text-blue-800",icon:u.Z},READY:{label:"Hazır",color:"bg-green-100 text-green-800",icon:m.Z},DELIVERED:{label:"Teslim Edildi",color:"bg-gray-100 text-gray-800",icon:m.Z},CANCELLED:{label:"İptal",color:"bg-red-100 text-red-800",icon:x.Z}};(0,i.useEffect)(()=>{if("loading"!==s){if(!t){window.location.href="https://portal.siparisqr.com/login";return}C()}},[t,s]);let C=async()=>{try{let e=await fetch("/api/orders");if(e.ok){let t=await e.json();g(t)}}catch(e){console.error("Orders fetch error:",e)}finally{v(!1)}},z=async(e,t)=>{try{(await fetch("/api/orders/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})})).ok&&(C(),(null==j?void 0:j.id)===e&&b({...j,status:t}))}catch(e){console.error("Order update error:",e)}},E=p.filter(e=>"all"===N||e.status===N);return"loading"===s||y?(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),(0,r.jsx)("div",{className:"grid gap-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{className:"h-24 bg-gray-200 rounded"},t))})]})}):t?(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Siparişler"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Gelen siparişleri y\xf6netin ve durumlarını g\xfcncelleyin"})]}),(0,r.jsxs)(c.z,{onClick:C,children:[(0,r.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Yenile"]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mb-6",children:[(0,r.jsxs)(c.z,{variant:"all"===N?"default":"outline",size:"sm",onClick:()=>k("all"),children:["T\xfcm\xfc (",p.length,")"]}),Object.entries(w).map(e=>{let[t,s]=e,n=p.filter(e=>e.status===t).length;return(0,r.jsxs)(c.z,{variant:N===t?"default":"outline",size:"sm",onClick:()=>k(t),children:[s.label," (",n,")"]},t)})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-2 space-y-4",children:0===E.length?(0,r.jsx)(l.Zb,{children:(0,r.jsxs)(l.aY,{className:"p-8 text-center",children:[(0,r.jsx)("div",{className:"h-12 w-12 text-gray-400 mx-auto mb-4 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5-6m0 0h15M17 21a2 2 0 100-4 2 2 0 000 4zM9 21a2 2 0 100-4 2 2 0 000 4z"})})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Sipariş bulunamadı"}),(0,r.jsx)("p",{className:"text-gray-600",children:"all"===N?"Hen\xfcz sipariş gelmemiş.":"".concat(null===(e=w[N])||void 0===e?void 0:e.label," durumunda sipariş yok.")})]})}):E.map(e=>(w[e.status].icon,(0,r.jsx)(l.Zb,{className:"cursor-pointer transition-all hover:shadow-md ".concat((null==j?void 0:j.id)===e.id?"ring-2 ring-primary":""),onClick:()=>b(e),children:(0,r.jsxs)(l.aY,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center text-white font-medium",children:e.table.number}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"font-medium",children:["Masa ",e.table.number]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.createdAt).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)(d.C,{className:w[e.status].color,children:[(()=>{let t=w[e.status].icon;return(0,r.jsx)(t,{className:"w-3 h-3 mr-1"})})(),w[e.status].label]}),(0,r.jsxs)("span",{className:"font-bold text-lg",children:["₺",e.total.toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[e.items.slice(0,2).map((t,s)=>(0,r.jsxs)("span",{children:[t.quantity,"x ",t.product.name,s<Math.min(e.items.length,2)-1&&", "]},s)),e.items.length>2&&(0,r.jsxs)("span",{children:[" ve ",e.items.length-2," \xfcr\xfcn daha"]})]}),e.notes&&(0,r.jsxs)("div",{className:"mt-2 p-2 bg-yellow-50 rounded text-sm text-yellow-800",children:[(0,r.jsx)("strong",{children:"Not:"})," ",e.notes]})]})},e.id)))}),(0,r.jsx)("div",{className:"lg:col-span-1",children:j?(0,r.jsxs)(l.Zb,{className:"sticky top-4",children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsxs)(l.ll,{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"Sipariş Detayı"}),(0,r.jsxs)(d.C,{className:w[j.status].color,children:[(()=>{let e=w[j.status].icon;return(0,r.jsx)(e,{className:"w-3 h-3 mr-1"})})(),w[j.status].label]})]}),(0,r.jsxs)(l.SZ,{children:["Masa ",j.table.number," • ",new Date(j.createdAt).toLocaleString("tr-TR")]})]}),(0,r.jsxs)(l.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium mb-2",children:"Sipariş İ\xe7eriği"}),(0,r.jsx)("div",{className:"space-y-2",children:j.items.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:e.product.name}),(0,r.jsxs)("span",{className:"text-gray-600 ml-2",children:["x",e.quantity]})]}),(0,r.jsxs)("span",{className:"font-medium",children:["₺",e.price.toFixed(2)]})]},t))}),(0,r.jsx)("div",{className:"border-t pt-2 mt-2",children:(0,r.jsxs)("div",{className:"flex justify-between items-center font-bold",children:[(0,r.jsx)("span",{children:"Toplam"}),(0,r.jsxs)("span",{children:["₺",j.total.toFixed(2)]})]})})]}),j.notes&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium mb-2",children:"Notlar"}),(0,r.jsx)("div",{className:"p-3 bg-yellow-50 rounded text-sm",children:j.notes})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium mb-2",children:"Durum G\xfcncelle"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:["PENDING"===j.status&&(0,r.jsx)(c.z,{size:"sm",onClick:()=>z(j.id,"PREPARING"),children:"Hazırlamaya Başla"}),"PREPARING"===j.status&&(0,r.jsx)(c.z,{size:"sm",onClick:()=>z(j.id,"READY"),children:"Hazır"}),"READY"===j.status&&(0,r.jsx)(c.z,{size:"sm",onClick:()=>z(j.id,"DELIVERED"),children:"Teslim Edildi"}),["PENDING","PREPARING"].includes(j.status)&&(0,r.jsx)(c.z,{size:"sm",variant:"destructive",onClick:()=>z(j.id,"CANCELLED"),children:"İptal Et"})]})]})]})]}):(0,r.jsx)(l.Zb,{children:(0,r.jsxs)(l.aY,{className:"p-8 text-center",children:[(0,r.jsx)(h.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Sipariş Se\xe7in"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Detaylarını g\xf6rmek i\xe7in bir sipariş se\xe7in"})]})})})]})]}):null}},9174:function(e,t,s){"use strict";s.d(t,{C:function(){return l}});var r=s(7437);s(2265);var n=s(535),a=s(3448);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...n}=e;return(0,r.jsx)("div",{className:(0,a.cn)(i({variant:s}),t),...n})}},2381:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var r=s(7437),n=s(2265),a=s(7495),i=s(535),l=s(3448);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:s,variant:n,size:i,asChild:d=!1,...o}=e,u=d?a.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(c({variant:n,size:i,className:s})),ref:t,...o})});d.displayName="Button"},9820:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},ll:function(){return c}});var r=s(7437),n=s(2265),a=s(3448);let i=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});i.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",s),...n})});l.displayName="CardHeader";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});c.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",s),...n})});d.displayName="CardDescription";let o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",s),...n})});o.displayName="CardContent",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter"},3448:function(e,t,s){"use strict";s.d(t,{cn:function(){return a}});var r=s(1994),n=s(3335);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,r.W)(t))}}},function(e){e.O(0,[697,605,971,117,744],function(){return e(e.s=8890)}),_N_E=e.O()}]);